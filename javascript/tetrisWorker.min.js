(function(){var handlers,update,_chromosomeIndex,_tetris;importScripts("tetris.js","/libraries/underscore.js"),_tetris=_chromosomeIndex=null,update=function(){return _tetris.gameOver()?(self.postMessage({func:"complete",score:_tetris.score,index:_chromosomeIndex}),self.close()):(_tetris.makeMove(),self.postMessage({func:"move",tetris:_tetris,index:_chromosomeIndex}))},handlers={evaluateFitness:function(){var chromosome,chromosomeIndex,index,workerIndex,_ref;return _ref=e.data,chromosome=_ref.chromosome,index=_ref.index,workerIndex=index.workerIndex,chromosomeIndex=index.chromosomeIndex,_tetris=new TetrisAI(chromosome.genes),_chromosomeIndex=chromosomeIndex,update()},update:function(){return update()}},self.addEventListener("message",function(e){return handlers[e.data.func]()})}).call(this);